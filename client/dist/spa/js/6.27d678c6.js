(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[6],{"6ccf":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{},[a("q-header",{attrs:{elevated:""}},[a("q-toolbar",[a("q-toolbar-title",[e._v("Public transport experiences")]),a("q-btn",{staticStyle:{"margin-right":"50px"},attrs:{color:"white","text-color":"primary",label:"Profile"},on:{click:function(t){e.userEdit=!1,e.profile=!0}}}),a("q-btn",{attrs:{color:"white","text-color":"black",label:"Log out"},on:{click:e.onLogout}})],1)],1),a("q-tabs",{staticClass:"bg-grey-2 text-primary shadow-2",attrs:{dense:"",align:"justify",breakpoint:0},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab",{attrs:{name:"my",label:"My experiences"}}),a("q-tab",{attrs:{name:"all",label:"All experiences"}})],1),a("q-tab-panels",{attrs:{animated:""},model:{value:e.tab,callback:function(t){e.tab=t},expression:"tab"}},[a("q-tab-panel",{attrs:{name:"my"}},[a("q-table",{staticStyle:{margin:"50px"},attrs:{title:"My experiences",data:e.experiences,filter:e.filter,columns:e.columns,"row-key":"name"},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body-cell-actions",fn:function(t){return[a("q-td",{attrs:{props:t}},[a("q-btn",{staticClass:"button",staticStyle:{"margin-right":"20px"},attrs:{outline:"",round:"",color:"primary",icon:"create"},on:{click:function(a){return e.editExperience(t.row)}}}),a("q-btn",{staticClass:"button",attrs:{outline:"",round:"",color:"negative",icon:"delete"},on:{click:function(a){return e.removeExperience(t.row)}}})],1)]}},{key:"body-cell-satisfaction",fn:function(e){return[a("q-td",{attrs:{props:e}},[a("q-icon",{attrs:{size:"lg",name:e.row.satisfaction}})],1)]}},{key:"top-left",fn:function(){return[a("q-btn",{attrs:{color:"primary",label:"ADD",outline:""},on:{click:e.addExperience}}),a("q-space")]},proxy:!0}])})],1),a("q-tab-panel",{attrs:{name:"all"}},[a("q-table",{staticStyle:{margin:"50px"},attrs:{title:"All experiences",data:e.allExperiences,filter:e.filter,columns:e.columns.filter((function(e){return"actions"!=e.name})),"row-key":"name"},scopedSlots:e._u([{key:"top-right",fn:function(){return[a("q-input",{attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{attrs:{name:"search"}})]},proxy:!0}]),model:{value:e.filter,callback:function(t){e.filter=t},expression:"filter"}})]},proxy:!0},{key:"body-cell-satisfaction",fn:function(e){return[a("q-td",{attrs:{props:e}},[a("q-icon",{attrs:{size:"lg",name:e.row.satisfaction}})],1)]}}])})],1)],1),a("q-dialog",{staticStyle:{width:"60%"},model:{value:e.card,callback:function(t){e.card=t},expression:"card"}},[a("q-card",{staticClass:"my-card full-width"},[a("q-card-section",{staticClass:"row text-h5 ellipsis"},["ADD"===e.state?a("div",{staticClass:"col-3 text-grey"},[e._v("Add experience")]):a("div",{staticClass:"col-3 text-grey"},[e._v("Edit experience")])]),a("q-card-section",[a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Departure:")]),a("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"Departure"},model:{value:e.selectedExperience.start,callback:function(t){e.$set(e.selectedExperience,"start",t)},expression:"selectedExperience.start"}})],1),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("End:")]),a("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"End"},model:{value:e.selectedExperience.end,callback:function(t){e.$set(e.selectedExperience,"end",t)},expression:"selectedExperience.end"}})],1),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Crowd level: "+e._s(e.selectedExperience.crowdLevel)+"%")]),a("div",{staticClass:"col-9"},[a("q-slider",{attrs:{outlined:"",dense:"",min:0,max:100},model:{value:e.selectedExperience.crowdLevel,callback:function(t){e.$set(e.selectedExperience,"crowdLevel",t)},expression:"selectedExperience.crowdLevel"}})],1)]),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Travel duration:")]),a("q-input",{staticClass:"col-9",attrs:{type:"number",outlined:"",dense:"",label:"Duration (minutes)"},model:{value:e.selectedExperience.travelDuration,callback:function(t){e.$set(e.selectedExperience,"travelDuration",t)},expression:"selectedExperience.travelDuration"}})],1),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Transport mean:")]),a("q-select",{staticClass:"col-9",attrs:{options:["Bus","Metro","Tram"],label:"Transport mean",outlined:"",dense:""},model:{value:e.selectedExperience.transportMean,callback:function(t){e.$set(e.selectedExperience,"transportMean",t)},expression:"selectedExperience.transportMean"}})],1),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Observation:")]),a("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"Observation"},model:{value:e.selectedExperience.observation,callback:function(t){e.$set(e.selectedExperience,"observation",t)},expression:"selectedExperience.observation"}})],1),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Satisfaction:")]),a("q-radio",{attrs:{val:"sentiment_very_satisfied"},model:{value:e.selectedExperience.satisfaction,callback:function(t){e.$set(e.selectedExperience,"satisfaction",t)},expression:"selectedExperience.satisfaction"}},[a("q-icon",{attrs:{size:"lg",name:"sentiment_very_satisfied"}})],1),a("q-radio",{attrs:{val:"sentiment_satisfied"},model:{value:e.selectedExperience.satisfaction,callback:function(t){e.$set(e.selectedExperience,"satisfaction",t)},expression:"selectedExperience.satisfaction"}},[a("q-icon",{attrs:{size:"lg",name:"sentiment_satisfied"}})],1),a("q-radio",{attrs:{val:"sentiment_dissatisfied"},model:{value:e.selectedExperience.satisfaction,callback:function(t){e.$set(e.selectedExperience,"satisfaction",t)},expression:"selectedExperience.satisfaction"}},[a("q-icon",{attrs:{size:"lg",name:"sentiment_dissatisfied"}})],1),a("q-radio",{attrs:{val:"sentiment_very_dissatisfied"},model:{value:e.selectedExperience.satisfaction,callback:function(t){e.$set(e.selectedExperience,"satisfaction",t)},expression:"selectedExperience.satisfaction"}},[a("q-icon",{attrs:{size:"lg",name:"sentiment_very_dissatisfied"}})],1)],1),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Time")]),a("q-input",{staticClass:"col-9",attrs:{label:"Time",outlined:"",dense:"",mask:"time",rules:["time"]},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:"access_time"}},[a("q-popup-proxy",{attrs:{"transition-show":"scale","transition-hide":"scale"}},[a("q-time",{attrs:{"now-btn":""},model:{value:e.selectedExperience.time,callback:function(t){e.$set(e.selectedExperience,"time",t)},expression:"selectedExperience.time"}})],1)],1)]},proxy:!0}]),model:{value:e.selectedExperience.time,callback:function(t){e.$set(e.selectedExperience,"time",t)},expression:"selectedExperience.time"}})],1)]),a("q-card-section",[a("q-card-actions",{attrs:{align:"around"}},["ADD"===e.state?a("q-btn",{attrs:{icon:"commute",outline:"",color:"primary"},on:{click:e.executeAddExperience}},[e._v("Add")]):a("q-btn",{attrs:{icon:"commute",outline:"",color:"primary"},on:{click:e.executeSaveExperience}},[e._v("Edit")])],1)],1)],1)],1),a("q-dialog",{staticStyle:{width:"60%"},model:{value:e.profile,callback:function(t){e.profile=t},expression:"profile"}},[a("q-card",{staticClass:"my-card full-width"},[a("q-card-section",{staticClass:"row text-h5 ellipsis"},[a("div",{staticClass:"col-3 text-grey",staticStyle:{width:"83%"}},[e._v("My profile")]),a("div",{staticClass:"col-2",attrs:{align:"right"}},[e.userEdit?a("q-btn",{attrs:{color:"primary",round:"",outline:"",icon:"clear"},on:{click:function(t){e.userEdit=!1,e.isPassword=!1}}}):a("q-btn",{attrs:{color:"primary",round:"",outline:"",icon:"create"},on:{click:function(t){e.userEdit=!0,e.isPassword=!1}}})],1)]),a("q-card-section",[a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("First name:")]),e.userEdit?a("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"First name"},model:{value:e.user.firstName,callback:function(t){e.$set(e.user,"firstName",t)},expression:"user.firstName"}}):a("div",{staticClass:"col-9 text-dark"},[e._v(e._s(e.user.firstName))])],1),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Last name:")]),e.userEdit?a("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"Last name"},model:{value:e.user.lastName,callback:function(t){e.$set(e.user,"lastName",t)},expression:"user.lastName"}}):a("div",{staticClass:"col-9 text-dark"},[e._v(e._s(e.user.lastName))])],1),a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Email:")]),e.userEdit?a("q-input",{staticClass:"col-9",attrs:{type:"text",outlined:"",dense:"",label:"Email"},model:{value:e.user.email,callback:function(t){e.$set(e.user,"email",t)},expression:"user.email"}}):a("div",{staticClass:"col-9 text-dark"},[e._v(e._s(e.user.email))])],1),e.isPassword?a("div",{staticClass:"row q-mb-md"},[a("div",{staticClass:"col-3 text-grey"},[e._v("Password:")]),a("q-input",{staticClass:"col-9",attrs:{outlined:"",label:"Password",dense:"",type:e.isPwd?"password":"text"},scopedSlots:e._u([{key:"append",fn:function(){return[a("q-icon",{staticClass:"cursor-pointer",attrs:{name:e.isPwd?"visibility_off":"visibility"},on:{click:function(t){e.isPwd=!e.isPwd}}})]},proxy:!0}],null,!1,3635466494),model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1):e._e()]),a("q-card-section",[e.userEdit?a("q-card-actions",{attrs:{align:"around"}},[e.isPassword?a("q-btn",{attrs:{icon:"clear",outline:"",color:"primary"},on:{click:function(t){e.isPassword=!1}}},[e._v("Password")]):a("q-btn",{attrs:{outline:"",color:"primary"},on:{click:function(t){e.isPassword=!0}}},[e._v("Change password")]),a("q-btn",{attrs:{icon:"save",outline:"",color:"primary"},on:{click:e.executeSaveUser}},[e._v("Save changes")])],1):a("q-card-actions",{attrs:{align:"around"}},[a("q-btn",{attrs:{outline:"",color:"negative"},on:{click:function(t){return e.deleteAccount()}}},[e._v("Delete account")])],1)],1)],1)],1)],1)},i=[],r=(a("8e6e"),a("8a81"),a("ac6a"),a("cadf"),a("06db"),a("456d"),a("9523")),n=a.n(r);function o(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,s)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?o(Object(a),!0).forEach((function(t){n()(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):o(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var l={name:"LoginPage",data:function(){return{isPassword:!1,isPwd:!0,password:"",profile:!1,user:{},userEdit:!1,state:"VIEW",tab:"my",filter:"",card:!1,selectedExperience:{},columns:[{name:"start",required:!0,label:"Departure",align:"left",field:function(e){return e.start},format:function(e){return"".concat(e)},sortable:!0},{name:"end",required:!0,label:"Destination",align:"left",field:function(e){return e.end},format:function(e){return"".concat(e)},sortable:!0},{name:"crowdLevel",required:!0,label:"Crowd level",align:"left",field:function(e){return e.crowdLevel},format:function(e){return"".concat(e,"%")},sortable:!0},{name:"travelDuration",required:!0,label:"Travel duration",align:"left",field:function(e){return e.travelDuration},format:function(e){return"".concat(e," minutes")},sortable:!0},{name:"transportMean",required:!0,label:"Transport mean",align:"left",field:function(e){return e.transportMean},format:function(e){return"".concat(e)},sortable:!0},{name:"satisfaction",required:!0,label:"Satisfaction",align:"left",field:function(e){return e.satisfaction},sortable:!0},{name:"time",required:!0,label:"Time",align:"left",field:function(e){return e.time},format:function(e){return"".concat(e)},sortable:!0},{name:"observation",required:!0,label:"Observations",align:"left",field:function(e){return e.observation},format:function(e){return"".concat(e)},sortable:!0},{name:"actions",label:"Action"}]}},beforeMount:function(){this.user=this.$q.localStorage.getItem("user"),this.user?(this.$store.dispatch("data/loadExperiences"),this.$store.dispatch("data/loadAllExperiences")):this.$router.push("/auth")},methods:{addExperience:function(){this.state="ADD",this.card=!0,this.selectedExperience={start:"",end:"",transportMean:"",time:"",travelDuration:0,crowdLevel:50,observation:"",satisfaction:""}},editExperience:function(e){this.state="EDIT",this.card=!0,this.selectedExperience=c({},e)},deleteAccount:function(){var e=this;this.$q.dialog({title:"Confirmation",message:"Are you sure you want to delete your account?",cancel:!0,persistent:!0}).onOk((function(){e.$axios.delete("/api/user").then((function(t){e.$q.notify({color:"green",message:t.data.message,icon:"arrow_forward"}),e.$q.localStorage.set("user",!1),e.$router.push("/auth")})).catch((function(t){switch(t.response.status){case 400:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message})}}))}))},removeExperience:function(e){var t=this;this.$q.dialog({title:"Confirmation",message:"Do you want to delete ".concat(e.start," -  ").concat(e.end," ?"),cancel:!0,persistent:!0}).onOk((function(){t.$axios.delete("/api/experiences",{data:{id:e.id}}).then((function(e){t.$q.notify({color:"green",message:e.data.message,icon:"arrow_forward"}),t.$store.dispatch("data/loadExperiences"),t.$store.dispatch("data/loadAllExperiences")})).catch((function(e){switch(e.response.status){case 400:e.response.data.errors.forEach((function(e){t.$q.notify({color:"negative",message:e})}));break;default:t.$q.notify({color:"negative",message:e.response.data.message})}}))}))},executeSaveExperience:function(){var e=this;this.$axios.put("/api/experiences",c({},this.selectedExperience)).then((function(t){e.$q.notify({color:"green",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadExperiences"),e.$store.dispatch("data/loadAllExperiences"),e.card=!1})).catch((function(t){switch(t.response.status){case 400:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message})}}))},executeSaveUser:function(){var e=this;this.$axios.put("/api/user",c(c({},this.user),{},{password:this.password,changePassword:this.isPassword})).then((function(t){e.$q.notify({color:"green",message:t.data.message,icon:"arrow_forward"}),e.$q.localStorage.set("user",t.data.user),e.user=t.data.user,e.userEdit=!1,e.isPassword=!1})).catch((function(t){switch(t.response.status){case 400:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message})}}))},executeAddExperience:function(){var e=this;this.$axios.post("/api/experiences",c({},this.selectedExperience)).then((function(t){e.$q.notify({color:"green",message:t.data.message,icon:"arrow_forward"}),e.$store.dispatch("data/loadExperiences"),e.$store.dispatch("data/loadAllExperiences"),e.card=!1})).catch((function(t){switch(t.response.status){case 400:t.response.data.errors.forEach((function(t){e.$q.notify({color:"negative",message:t})}));break;default:e.$q.notify({color:"negative",message:t.response.data.message})}}))},onLogout:function(){var e=this;this.$axios.get("/api/logout").then((function(t){e.$q.notify({color:"primary",message:t.data.message}),e.$q.localStorage.set("user",!1),e.$router.push("/auth")})).catch((function(t){e.$q.notify({color:"negative",message:t.response.data.message})}))}},computed:{experiences:function(){return this.$store.getters["data/getExperiences"]},allExperiences:function(){return this.$store.getters["data/getAllExperiences"]}}},d=l,u=a("2877"),p=a("eebe"),f=a.n(p),m=a("9989"),b=a("e359"),x=a("65c6"),v=a("6ac5"),g=a("9c40"),q=a("429b"),y=a("7460"),h=a("adad"),w=a("823b"),E=a("eaac"),k=a("27f9"),C=a("0016"),$=a("db86"),_=a("2c91"),P=a("24e8"),S=a("f09f"),D=a("a370"),O=a("c1d0"),Q=a("ddd8"),A=a("3786"),T=a("7cbe"),j=a("ca78"),L=a("4b7e"),M=Object(u["a"])(d,s,i,!1,null,null,null);t["default"]=M.exports;f()(M,"components",{QPage:m["a"],QHeader:b["a"],QToolbar:x["a"],QToolbarTitle:v["a"],QBtn:g["a"],QTabs:q["a"],QTab:y["a"],QTabPanels:h["a"],QTabPanel:w["a"],QTable:E["a"],QInput:k["a"],QIcon:C["a"],QTd:$["a"],QSpace:_["a"],QDialog:P["a"],QCard:S["a"],QCardSection:D["a"],QSlider:O["a"],QSelect:Q["a"],QRadio:A["a"],QPopupProxy:T["a"],QTime:j["a"],QCardActions:L["a"]})}}]);